<!DOCTYPE html>
<html lang="id" class="scroll-smooth">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Butterfly AI Classifier - Project Report</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" />

  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['"Outfit"', "sans-serif"] },
          colors: {
            brand: {
              dark: "#0f172a",
              accent: "#38bdf8", // Sky Blue
              success: "#34d399", // Emerald
              failure: "#d63124", // Emerald
            },
          },
        },
      },
    };
  </script>
  <style>
    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 10px;
    }

    ::-webkit-scrollbar-track {
      background: #0f172a;
    }

    ::-webkit-scrollbar-thumb {
      background: #334155;
      border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #38bdf8;
    }

    /* Background Grid Pattern */
    .bg-grid {
      background-size: 40px 40px;
      background-image: linear-gradient(to right,
          rgba(255, 255, 255, 0.05) 1px,
          transparent 1px),
        linear-gradient(to bottom,
          rgba(255, 255, 255, 0.05) 1px,
          transparent 1px);
    }

    /* Glass Effect */
    .glass {
      background: rgba(30, 41, 59, 0.7);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    @import "tailwindcss";
    @custom-variant high (&:where([confidence-level=high], [confidence-level=high] *));
    @custom-variant mid (&:where([confidence-level=mid], [confidence-level=mid] *));
    @custom-variant low (&:where([confidence-level=low], [confidence-level=low] *));
  </style>
</head>

<body class="bg-brand-dark text-slate-200 font-sans selection:bg-brand-accent selection:text-brand-dark">
  <nav class="fixed top-0 w-full z-50 glass border-b border-slate-700/50">
    <div class="max-w-6xl mx-auto px-6 h-16 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <span class="material-symbols-rounded text-brand-accent text-3xl">view_in_ar</span>
        <span class="font-bold text-white text-lg tracking-wide">ComputerVision<span
            class="text-brand-accent">Project</span></span>
      </div>
      <div class="hidden md:flex gap-8 text-sm font-medium">
        <a href="#about" class="hover:text-brand-accent transition">Tentang Model</a>
        <a href="#process" class="hover:text-brand-accent transition">Training Process</a>
        <a href="#demo"
          class="px-4 py-2 bg-brand-accent text-brand-dark rounded-full font-bold hover:bg-sky-400 transition">Coba
          Demo</a>
      </div>
    </div>
  </nav>

  <header class="relative min-h-screen flex items-center justify-center pt-16 overflow-hidden">
    <div class="absolute top-0 left-0 w-full h-full bg-grid z-0"></div>
    <div class="absolute top-20 left-1/4 w-96 h-96 bg-brand-accent/20 rounded-full blur-[128px]"></div>
    <div class="absolute bottom-20 right-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-[128px]"></div>

    <div class="relative z-10 text-center max-w-4xl px-6">
      <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full glass mb-6 border border-brand-accent/30">
        <span class="w-2 h-2 rounded-full bg-brand-success animate-pulse"></span>
        <span class="text-xs font-semibold text-brand-accent uppercase tracking-wider">AI Powered System</span>
      </div>
      <h1 class="text-5xl md:text-7xl font-extrabold text-white leading-tight mb-6">
        Klasifikasi Spesies <br />
        <span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-accent to-purple-400">Kupu-Kupu</span>
        Otomatis
      </h1>
      <p class="text-lg text-slate-400 mb-10 max-w-2xl mx-auto">
        Implementasi Computer Vision menggunakan Deep Learning untuk mengenali
        75 spesies kupu-kupu dengan akurasi tinggi.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="#demo"
          class="px-8 py-4 bg-brand-accent text-brand-dark font-bold rounded-xl hover:bg-sky-400 transition transform hover:-translate-y-1 shadow-lg shadow-sky-500/20 flex items-center justify-center gap-2">
          <span class="material-symbols-rounded">rocket_launch</span>
          Mulai Deteksi
        </a>
        <a href="#about"
          class="px-8 py-4 glass text-white font-bold rounded-xl hover:bg-slate-800 transition flex items-center justify-center gap-2">
          <span class="material-symbols-rounded">info</span>
          Pelajari Teknisnya
        </a>
      </div>
    </div>
  </header>

  <section id="about" class="py-20 bg-slate-900/50">
    <div class="max-w-6xl mx-auto px-6">
      <div class="mb-16">
        <h2 class="text-3xl font-bold text-white mb-4">Arsitektur Model</h2>
        <div class="w-20 h-1 bg-brand-accent rounded-full"></div>
      </div>

      <div class="grid md:grid-cols-2 gap-12 items-center">
        <div class="space-y-6">
          <h3 class="text-2xl font-bold text-sky-400">
            MobileNetV2 + Transfer Learning
          </h3>
          <p class="text-slate-400 leading-relaxed">
            Kami tidak membangun model dari nol. Proyek ini menggunakan teknik
            <strong>Transfer Learning</strong> dengan memanfaatkan
            <strong>MobileNetV2</strong>, sebuah arsitektur CNN (Convolutional
            Neural Network) yang dikembangkan oleh Google.
          </p>
          <ul class="space-y-4">
            <li class="flex items-start gap-3">
              <span class="material-symbols-rounded text-brand-success mt-1">check_circle</span>
              <div>
                <strong class="text-white">Pre-trained on ImageNet:</strong>
                <p class="text-sm text-slate-500">
                  Model dasar sudah dilatih pada 1.4 juta gambar sebelum
                  mempelajari dataset kupu-kupu kami.
                </p>
              </div>
            </li>
            <li class="flex items-start gap-3">
              <span class="material-symbols-rounded text-brand-success mt-1">check_circle</span>
              <div>
                <strong class="text-white">Lightweight & Fast:</strong>
                <p class="text-sm text-slate-500">
                  MobileNetV2 dirancang efisien, cocok untuk deployment di web
                  atau mobile.
                </p>
              </div>
            </li>
            <li class="flex items-start gap-3">
              <span class="material-symbols-rounded text-brand-success mt-1">check_circle</span>
              <div>
                <strong class="text-white">Fine-Tuning:</strong>
                <p class="text-sm text-slate-500">
                  Kami menambahkan Custom Head (Dense Layer) di bagian akhir
                  untuk mengklasifikasikan 75 spesies spesifik.
                </p>
              </div>
            </li>
          </ul>
        </div>

        <div class="glass p-8 rounded-2xl relative">
          <div class="absolute -top-5 -right-5 w-20 h-20 bg-brand-accent/20 rounded-full blur-xl"></div>
          <div class="space-y-4">
            <div class="p-4 border border-slate-600 rounded-lg bg-slate-800 text-center opacity-50">
              <p class="text-xs font-mono text-slate-400">
                Input Image (224x224)
              </p>
            </div>
            <div class="flex justify-center">
              <span class="material-symbols-rounded text-slate-500">arrow_downward</span>
            </div>
            <div
              class="p-6 border-2 border-brand-accent/50 rounded-lg bg-slate-800/80 text-center relative overflow-hidden">
              <div class="absolute inset-0 bg-brand-accent/5"></div>
              <p class="font-bold text-white">MobileNetV2 Base</p>
              <p class="text-xs text-brand-accent mt-1">
                (Frozen Layers / Feature Extractor)
              </p>
            </div>
            <div class="flex justify-center">
              <span class="material-symbols-rounded text-slate-500">arrow_downward</span>
            </div>
            <div class="p-4 border border-brand-success rounded-lg bg-brand-success/10 text-center">
              <p class="font-bold text-white">Custom Classification Head</p>
              <p class="text-xs text-brand-success mt-1">
                GlobalAvgPool -> Dense(256) -> Softmax(75)
              </p>
            </div>
            <div class="flex justify-center">
              <span class="material-symbols-rounded text-slate-500">arrow_downward</span>
            </div>
            <div class="p-4 border border-slate-600 rounded-lg bg-slate-800 text-center">
              <p class="font-bold text-white">Output Prediction</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="process" class="py-20 relative overflow-hidden">
    <div class="max-w-6xl mx-auto px-6 relative z-10">
      <div class="mb-16 text-center">
        <h2 class="text-3xl font-bold text-white mb-4">
          Proses Pelatihan (Training Pipeline)
        </h2>
        <p class="text-slate-400">
          Langkah-langkah yang dilakukan untuk mencapai akurasi tinggi.
        </p>
      </div>

      <div class="grid md:grid-cols-3 gap-6">
        <div class="glass p-6 rounded-2xl hover:border-brand-accent/50 transition duration-300 group">
          <div
            class="w-12 h-12 bg-slate-800 rounded-lg flex items-center justify-center mb-4 group-hover:bg-brand-accent transition">
            <span class="material-symbols-rounded text-white">dataset</span>
          </div>
          <h3 class="text-xl font-bold text-white mb-2">
            1. Data Preparation
          </h3>
          <p class="text-slate-400 text-sm">
            Mengumpulkan dataset berisi ribuan gambar yang terbagi dalam 75
            kelas spesies. Data dibagi menjadi Training (80%) dan Validation
            (20%).
          </p>
        </div>

        <div class="glass p-6 rounded-2xl hover:border-brand-accent/50 transition duration-300 group">
          <div
            class="w-12 h-12 bg-slate-800 rounded-lg flex items-center justify-center mb-4 group-hover:bg-brand-accent transition">
            <span class="material-symbols-rounded text-white">transform</span>
          </div>
          <h3 class="text-xl font-bold text-white mb-2">
            2. Augmentation & Preprocessing
          </h3>
          <p class="text-slate-400 text-sm">
            Gambar diubah ukurannya menjadi <strong>224x224 px</strong>.
            Dilakukan augmentasi (rotasi, zoom, flip) untuk mencegah
            overfitting, dan normalisasi pixel ke range [-1, 1].
          </p>
        </div>

        <div class="glass p-6 rounded-2xl hover:border-brand-accent/50 transition duration-300 group">
          <div
            class="w-12 h-12 bg-slate-800 rounded-lg flex items-center justify-center mb-4 group-hover:bg-brand-accent transition">
            <span class="material-symbols-rounded text-white">model_training</span>
          </div>
          <h3 class="text-xl font-bold text-white mb-2">
            3. Training & Optimization
          </h3>
          <p class="text-slate-400 text-sm">
            Model dilatih menggunakan optimizer <strong>Adam</strong> dan Loss
            Function <strong>Categorical Crossentropy</strong>. Callback
            digunakan untuk menyimpan model terbaik secara otomatis.
          </p>
        </div>
      </div>
    </div>
  </section>

  <section id="demo" class="py-20 bg-slate-900">
    <div class="max-w-4xl mx-auto px-6">
      <div class="glass rounded-3xl p-1 border-2 border-brand-accent/20 shadow-2xl shadow-sky-900/50">
        <div class="bg-brand-dark rounded-[1.4rem] p-8 md:p-12">
          <div class="text-center mb-10">
            <span class="text-brand-accent font-bold tracking-widest text-xs uppercase">Live Demo</span>
            <h2 class="text-3xl md:text-4xl font-bold text-white mt-2">
              Uji Coba Model
            </h2>
            <p class="text-slate-400 mt-2">
              Upload gambar kupu-kupu untuk melihat hasil prediksi AI.
            </p>
          </div>

          <form action="/" method="POST" enctype="multipart/form-data" id="uploadForm">
            <div id="dropZone"
              class="border-2 border-dashed border-slate-700 hover:border-brand-accent rounded-2xl h-80 flex flex-col items-center justify-center cursor-pointer relative bg-slate-800/30 transition-all group overflow-hidden">
              <div id="defaultContent" class="flex flex-col items-center gap-4 p-6 transition-all duration-300">
                <div
                  class="w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center group-hover:scale-110 transition">
                  <span
                    class="material-symbols-rounded text-4xl text-slate-400 group-hover:text-brand-accent">cloud_upload</span>
                </div>
                <div class="text-center">
                  <p class="text-lg font-bold text-white">
                    Klik atau Drop Gambar
                  </p>
                  <p class="text-slate-500 text-sm mt-1">
                    Format JPG atau PNG
                  </p>
                </div>
              </div>

              <img id="imagePreview"
                class="absolute inset-0 w-full h-full object-contain bg-black/50 hidden backdrop-blur-sm p-4" />

              <input type="file" name="file" id="fileInput" accept="image/*"
                class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" />
            </div>

            <div class="mt-8 flex justify-center">
              <button type="submit" id="submitBtn"
                class="hidden w-full md:w-auto px-10 py-4 bg-brand-accent text-brand-dark font-bold rounded-xl hover:bg-sky-400 transition shadow-lg shadow-sky-500/20 items-center gap-2">
                <span class="material-symbols-rounded">search</span>
                Identifikasi Sekarang
              </button>

              <div id="loadingState" class="hidden flex-col items-center gap-3">
                <div class="w-8 h-8 border-4 border-brand-accent/30 border-t-brand-accent rounded-full animate-spin">
                </div>
                <p class="text-slate-400 text-sm animate-pulse">
                  Sedang menganalisis pixel...
                </p>
              </div>
            </div>

            <div id="resultCard" class="mt-10 animate-fade-in hidden">
              <div
                class="glass rounded-xl p-6 border-l-4 border-brand-success bg-gradient-to-r from-emerald-900/20 to-transparent">
                <img id="predictedImage" class="rounded-lg mb-4 shadow-md" src="" alt="">

                <div id="failed">
                  <div class="flex flex-col items-center justify-between gap-6">
                    <p class="text-slate-400 text-xs font-bold uppercase tracking-widest mb-1">
                      Hasil Prediksi
                    </p>

                    <p class="text-brand-failure text-sm font-medium mt-1 flex items-center gap-1">
                      <span class="material-symbols-rounded text-sm">verified_off</span>
                      Identifikasi Gagal
                    </p>
                  </div>
                </div>

                <div id="success">
                  <div class="flex flex-col md:flex-row items-center justify-between gap-6">
                    <div>
                      <p class="text-slate-400 text-xs font-bold uppercase tracking-widest mb-1">
                        Hasil Prediksi
                      </p>
                      <h3 id="predictionResult" class="text-3xl font-black text-white">
                        <!-- FILL WITH JS -->
                      </h3>
                      <p class="text-brand-success text-sm font-medium mt-1 flex items-center gap-1">
                        <span class="material-symbols-rounded text-sm">verified</span>
                        Teridentifikasi Valid
                      </p>
                    </div>

                    <div class="w-full md:w-1/2">
                      <div class="flex justify-between text-sm mb-2">
                        <span class="text-slate-300">Tingkat Keyakinan (Confidence)</span>
                        <span id="confidenceText"
                          class="font-bold high:text-brand-accent mid:text-yellow-300 low:text-red-500"></span>
                      </div>
                      <div class="w-full bg-slate-700 rounded-full h-3 overflow-hidden">
                        <!-- SET WIDTH WITH JS -->
                        <div id="confidenceBar"
                          class="bg-brand-accent h-full rounded-full transition-all duration-1000">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <script>
              window.location.hash = "#demo";
            </script>
          </form>
        </div>
      </div>
    </div>
  </section>

  <footer class="py-10 text-center border-t border-slate-800 text-slate-500 text-sm">
    <p>
      &copy; 2025 Computer Science Binus University - Computer Vision Project
    </p>
  </footer>

  <script>
    const fileInput = document.getElementById("fileInput");
    const imagePreview = document.getElementById("imagePreview");
    const defaultContent = document.getElementById("defaultContent");
    const submitBtn = document.getElementById("submitBtn");
    const loadingState = document.getElementById("loadingState");
    const uploadForm = document.getElementById("uploadForm");
    const resultCard = document.getElementById("resultCard");
    const predictedImage = document.getElementById("predictedImage");
    const prediction = document.getElementById("predictionResult");
    const confidence = document.getElementById("confidenceText");
    const confidenceBar = document.getElementById("confidenceBar");
    const failed = document.getElementById("failed");
    const success = document.getElementById("success");

    fileInput.addEventListener("change", function (e) {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          imagePreview.src = e.target.result;
          imagePreview.classList.remove("hidden");
          defaultContent.classList.add("opacity-0");
          submitBtn.classList.remove("hidden");
          submitBtn.classList.add("flex");
        };
        reader.readAsDataURL(file);
      }
    });

    uploadForm.addEventListener("submit", function (e) {
      e.preventDefault();
      loadingState.classList.remove("hidden");
      loadingState.classList.add("flex");

      submitBtn.classList.add("hidden");
      const formData = new FormData(uploadForm);
      fetch('/', {
        method: 'POST',
        body: formData,
      }).then((response) => { return response.json() }).then((data) => {
        loadingState.classList.add("hidden");
        loadingState.classList.remove("flex");

        resultCard.classList.remove("hidden");

        console.log(data["confidence"])
        if (data["confidence"] < 50) {
          success.classList.add("hidden");
          failed.classList.remove("hidden");
        } else {
          success.classList.remove("hidden");
          failed.classList.add("hidden");

          prediction.innerText = data["prediction"]
          confidence.innerText = data["confidence"] + "%"
          confidenceBar.style.width = data["confidence"] + "%"
          predictedImage.src = data["img_path"]
        }
      })
    });
  </script>
</body>

</html>
